{"version":3,"sources":["webpack:///./src/views/CountryHeatMap.vue?8260","webpack:///src/views/CountryHeatMap.vue","webpack:///./src/views/CountryHeatMap.vue?cd72","webpack:///./src/views/CountryHeatMap.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticRenderFns","component"],"mappings":"k0EAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,IAAI,kBAC1GC,EAAkB,G,yDCStB,GACE,KAAF,iBACE,QAFF,WAEI,IAAJ,OAEI,KAAJ,sBACM,EAAN,eAGE,KARF,WASI,MAAJ,CACM,GAAN,KACM,MAAN,KACM,MAAN,KACM,YAAN,KACM,UAAN,OAGE,QAAF,CACI,SAAJ,WAAM,IAAN,OACM,KAAN,2BAEM,KAAN,sBACQ,aAAR,EACQ,GAAR,QACQ,IAAR,YACU,MAAV,OACU,MAAV,EACU,OAAV,SACU,KAAV,QAIM,KAAN,8BACQ,EAAR,4DACA,6BACY,EAAZ,yBAGU,EAAV,gCACA,sBACA,iBACA,8BACA,OACY,UAAZ,EACY,OAAZ,GACY,QAAZ,EACY,WAAZ,CACc,OAAd,CACA,UACA,UACA,UACA,UACA,UACA,WACA,UACc,UAAd,qBAGU,EAAV,wBACU,EAAV,8BACY,IAAZ,YACc,IAAd,WACA,mBACc,GAAd,0EACgB,QAAhB,OACgB,EAAhB,gBACgB,kBAOZ,aAAJ,YACM,IAAN,oCACQ,IAAR,0CACQ,GAAR,qBACU,QAAV,iBACU,KAAV,sBACU,KAAV,eACU,SAIN,aAAJ,WACM,OAAN,0CC/FwV,I,YCOpVC,EAAY,eACd,EACAT,EACAQ,GACA,EACA,KACA,WACA,MAIa,aAAAC,E","file":"js/chunk-6a51320a.692e909e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"mapContainer\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div ref=\"mapContainer\"></div>\r\n</template>\r\n\r\n<script>\r\n    import {Scene, HeatmapLayer} from '@antv/l7' // 引入工具模块\r\n    import {GaodeMap} from '@antv/l7-maps'\r\n    import axios from 'axios'\r\n    import codes from '../../codes.json'\r\n\r\n    export default {\r\n        name: 'CountryHeatMap',\r\n        created() {\r\n\r\n            this.$nextTick(() => {\r\n                this.getScene()\r\n            })\r\n        },\r\n        data() {\r\n            return {\r\n                el: null,\r\n                scene: null,\r\n                layer: null,\r\n                ProvinceArr: null,\r\n                cityArray:null\r\n            }\r\n        },\r\n        methods: {\r\n            getScene:function(){\r\n                this.el = this.$refs.mapContainer\r\n                // 创建场景\r\n                this.scene = new Scene({\r\n                    logoVisible: false,\r\n                    id: this.el,\r\n                    map: new GaodeMap({\r\n                        style: 'dark',\r\n                        pitch: 0,\r\n                        center: [100, 35],\r\n                        zoom: 4.5\r\n                    })\r\n                })\r\n\r\n                this.scene.on('loaded', () => {\r\n                    axios.get('http://127.0.0.1:1024/getGeoJson').then(res => {\r\n                        if (res != null && res.data.success == true) {\r\n                            this.ProvinceArr = res.data.data\r\n                            // console.log(this.ProvinceArr.features[0].properties.childStatistic)\r\n                        }\r\n                        this.layer = new HeatmapLayer({})\r\n                            .source(this.ProvinceArr)\r\n                            .shape('heatmap')\r\n                            .size('totalConfirmed', [1, 10]) // weight映射通道\r\n                            .style({\r\n                                intensity: 2,\r\n                                radius: 20,\r\n                                opacity: 1.0,\r\n                                rampColors: {\r\n                                    colors: [\r\n                                        '#FF4818',\r\n                                        '#F7B74A',\r\n                                        '#FFF598',\r\n                                        '#91EABC',\r\n                                        '#2EA9A1',\r\n                                        '#206C7C'\r\n                                    ].reverse(),\r\n                                    positions: [0, 0.2, 0.4, 0.6, 0.8, 1.0]\r\n                                }\r\n                            })\r\n                        this.scene.addLayer(this.layer)\r\n                        this.layer.on('click', (ev) => {\r\n                            for (let i in codes) {\r\n                                let n = ev.lngLat\r\n                                let m = codes[i].coordinates\r\n                                if (Math.floor(n.lat) == Math.floor(m[1]) && Math.floor(n.lng) == Math.floor(m[0])) {\r\n                                    console.log(i)\r\n                                    this.getCityArray(i)\r\n                                    break\r\n                                }\r\n                            }\r\n                        })\r\n                    })\r\n                })\r\n            },\r\n            getCityArray:function (name) {\r\n                for (let j in this.ProvinceArr.features) {\r\n                    var properties = this.ProvinceArr.features[j].properties\r\n                    if (properties.childStatistic == name){\r\n                        console.log(properties.cityArray)\r\n                        this.cityArray=properties.cityArray\r\n                        this.setCityArray()\r\n                        break\r\n                    }\r\n                }\r\n            },\r\n            setCityArray:function () {\r\n                window.parent.postMessage(this.cityArray,'*');\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CountryHeatMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CountryHeatMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CountryHeatMap.vue?vue&type=template&id=00cb6bf4&scoped=true&\"\nimport script from \"./CountryHeatMap.vue?vue&type=script&lang=js&\"\nexport * from \"./CountryHeatMap.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"00cb6bf4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}